<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<script>
			function flat1(arr) {
				let res = [];
				const flatRecur = (arr) => {
					arr.forEach((item) => {
						if (Array.isArray(item)) {
							flatRecur(item);
						} else {
							res.push(item);
						}
					});
				};
				flatRecur(arr);
				return res;
			}

			function flat2(arr) {
				let res = [];
				arr.forEach((item) => {
					if (Array.isArray(item)) {
						res = res.concat(flat2(item));
					} else {
						res = res.concat(item);
					}
				});
				return res;
			}

			function flat3(arr, dep = 2) {
				let res = [];
				arr.forEach((item) => {
					if (Array.isArray(item) && dep > 1) {
						res = res.concat(flat3(item, dep - 1));
					} else {
						res = res.concat(item);
					}
				});
				return res;
			}
			console.log(flat3([1, [2, 3], [4, [5, [6, [8]]], 7]], 2));
		</script>
	</body>
</html>
